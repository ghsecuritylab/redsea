--- a/component/common/api/at_cmd/log_service.c	2017-11-17 13:22:05.413716100 +0800
+++ b/component/common/api/at_cmd/log_service.c	2017-11-17 13:50:51.974053200 +0800
@@ -19,6 +19,7 @@
 //======================================================
 struct list_head log_hash[ATC_INDEX_NUM];
 
+extern void at_ayla_cli_init(void);
 extern void at_wifi_init(void);
 extern void at_fs_init(void);
 extern void at_sys_init(void);
@@ -57,6 +58,7 @@
 log_init_t* __log_init_end__;
 log_init_t log_init_table[] = {
 	at_wifi_init,
+	at_ayla_cli_init,
 	//	at_fs_init,
 
 	at_sys_init,
@@ -180,20 +182,20 @@
 	char *copy=buf;
 	char *token = NULL;
 	char *param = NULL;
-	char tok[5] = {0};//'\0'
+	char tok[16] = {0};//'\0'
 #if CONFIG_LOG_HISTORY
 	strcpy(log_history[((log_history_count++)%LOG_HISTORY_LEN)], log_buf);
 #endif
 	strncpy(copy, cmd,LOG_SERVICE_BUFLEN-1);
 
 #if defined(USE_STRSEP)
-	token = _strsep(&copy, "=");
+	token = _strsep(&copy, " =");
 	param = copy;
 #else
-	token = strtok(copy, "=");
+	token = strtok(copy, " =");
 	param = strtok(NULL, NULL);
 #endif
-	if(token && (strlen(token) <= 4))
+	if(token && (strlen(token) <= sizeof(tok)-1))
 		strcpy(tok, token);
 	else{
 		//printf("\n\rAT Cmd format error!\n");
@@ -328,10 +330,12 @@
 #endif
 void print_help_msg(void){
 #if CONFIG_WLAN
-extern void print_wlan_help(void);
-        print_wlan_help();
+/*extern void print_wlan_help(void);
+        print_wlan_help();*/
 #endif
 //add other help message print here
+extern void print_ayla_cli_help(void);
+	print_ayla_cli_help();
 }
 
 int print_help_handler(char *cmd){
@@ -391,7 +395,7 @@
 #if CONFIG_INIC_EN
 		inic_cmd_ioctl = 0;
 #endif
-		_AT_DBG_MSG(AT_FLAG_COMMON, AT_DBG_ALWAYS, "\n\r[MEM] After do cmd, available heap %d\n\r", xPortGetFreeHeapSize());
+//		_AT_DBG_MSG(AT_FLAG_COMMON, AT_DBG_ALWAYS, "\n\r[MEM] After do cmd, available heap %d\n\r", xPortGetFreeHeapSize());
 		_AT_DBG_MSG(AT_FLAG_COMMON, AT_DBG_ALWAYS, "\r\n\n# "); //"#" is needed for mp tool
 #if CONFIG_EXAMPLE_UART_ATCMD
 		if(atcmd_lwip_is_tt_mode())
